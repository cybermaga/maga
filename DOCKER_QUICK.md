# ðŸ³ Docker Quick Reference

## Ð‘Ñ‹ÑÑ‚Ñ€Ñ‹Ð¹ ÑÑ‚Ð°Ñ€Ñ‚

```bash
# 1. Ð—Ð°Ð¿ÑƒÑÐº Ð²ÑÐµÑ… ÑÐµÑ€Ð²Ð¸ÑÐ¾Ð²
docker-compose up -d

# 2. ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° ÑÑ‚Ð°Ñ‚ÑƒÑÐ°
docker-compose ps

# 3. ÐŸÑ€Ð¾ÑÐ¼Ð¾Ñ‚Ñ€ Ð»Ð¾Ð³Ð¾Ð²
docker-compose logs -f

# 4. ÐžÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐ° ÑÐµÑ€Ð²Ð¸ÑÐ¾Ð²
docker-compose down
```

ÐŸÑ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ðµ Ð´Ð¾ÑÑ‚ÑƒÐ¿Ð½Ð¾ Ð¿Ð¾ Ð°Ð´Ñ€ÐµÑÑƒ: **http://localhost:3000**

---

## ÐžÑÐ½Ð¾Ð²Ð½Ñ‹Ðµ ÐºÐ¾Ð¼Ð°Ð½Ð´Ñ‹

### Ð£Ð¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ðµ ÑÐµÑ€Ð²Ð¸ÑÐ°Ð¼Ð¸

```bash
# Ð¡Ð±Ð¾Ñ€ÐºÐ° Ð¾Ð±Ñ€Ð°Ð·Ð¾Ð²
docker-compose build

# Ð—Ð°Ð¿ÑƒÑÐº Ñ Ð¿ÐµÑ€ÐµÑÐ±Ð¾Ñ€ÐºÐ¾Ð¹
docker-compose up -d --build

# ÐŸÐµÑ€ÐµÐ·Ð°Ð¿ÑƒÑÐº ÐºÐ¾Ð½ÐºÑ€ÐµÑ‚Ð½Ð¾Ð³Ð¾ ÑÐµÑ€Ð²Ð¸ÑÐ°
docker-compose restart backend

# ÐžÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐ° Ð±ÐµÐ· ÑƒÐ´Ð°Ð»ÐµÐ½Ð¸Ñ
docker-compose stop

# Ð£Ð´Ð°Ð»ÐµÐ½Ð¸Ðµ ÐºÐ¾Ð½Ñ‚ÐµÐ¹Ð½ÐµÑ€Ð¾Ð² Ð¸ Ñ‚Ð¾Ð¼Ð¾Ð²
docker-compose down -v
```

### ÐŸÑ€Ð¾ÑÐ¼Ð¾Ñ‚Ñ€ Ð»Ð¾Ð³Ð¾Ð²

```bash
# Ð’ÑÐµ ÑÐµÑ€Ð²Ð¸ÑÑ‹
docker-compose logs -f

# ÐšÐ¾Ð½ÐºÑ€ÐµÑ‚Ð½Ñ‹Ð¹ ÑÐµÑ€Ð²Ð¸Ñ
docker-compose logs -f backend
docker-compose logs -f frontend
docker-compose logs -f mongodb

# ÐŸÐ¾ÑÐ»ÐµÐ´Ð½Ð¸Ðµ 100 ÑÑ‚Ñ€Ð¾Ðº
docker-compose logs --tail=100 backend
```

### Ð”Ð¾ÑÑ‚ÑƒÐ¿ Ðº ÐºÐ¾Ð½Ñ‚ÐµÐ¹Ð½ÐµÑ€Ð°Ð¼

```bash
# Backend shell
docker-compose exec backend bash

# MongoDB shell
docker-compose exec mongodb mongosh

# Python Ð² backend
docker-compose exec backend python3

# CLI Ð¸Ð½ÑÑ‚Ñ€ÑƒÐ¼ÐµÐ½Ñ‚
docker-compose exec backend python3 cli.py --help
```

---

## Ð£Ð¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ðµ Ð±Ð°Ð·Ð¾Ð¹ Ð´Ð°Ð½Ð½Ñ‹Ñ…

### Ð ÐµÐ·ÐµÑ€Ð²Ð½Ð¾Ðµ ÐºÐ¾Ð¿Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ

```bash
# Ð¡Ð¾Ð·Ð´Ð°Ñ‚ÑŒ Ð±ÑÐºÐ°Ð¿
docker exec emergent-compliance-mongodb mongodump \
  --out /data/backup/$(date +%Y%m%d_%H%M%S)

# Ð¡ÐºÐ¾Ð¿Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ Ð½Ð° Ñ…Ð¾ÑÑ‚
docker cp emergent-compliance-mongodb:/data/backup ./mongodb-backup
```

### Ð’Ð¾ÑÑÑ‚Ð°Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ðµ

```bash
# Ð¡ÐºÐ¾Ð¿Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ Ð±ÑÐºÐ°Ð¿ Ð² ÐºÐ¾Ð½Ñ‚ÐµÐ¹Ð½ÐµÑ€
docker cp ./mongodb-backup emergent-compliance-mongodb:/data/restore

# Ð’Ð¾ÑÑÑ‚Ð°Ð½Ð¾Ð²Ð¸Ñ‚ÑŒ
docker exec emergent-compliance-mongodb mongorestore /data/restore
```

### Ð Ð°Ð±Ð¾Ñ‚Ð° Ñ Ð´Ð°Ð½Ð½Ñ‹Ð¼Ð¸

```bash
# ÐŸÐ¾Ð´ÐºÐ»ÑŽÑ‡Ð¸Ñ‚ÑŒÑÑ Ðº MongoDB
docker exec -it emergent-compliance-mongodb mongosh compliance_db

# ÐŸÑ€Ð¾ÑÐ¼Ð¾Ñ‚Ñ€ ÐºÐ¾Ð»Ð»ÐµÐºÑ†Ð¸Ð¹
show collections

# ÐŸÑ€Ð¾ÑÐ¼Ð¾Ñ‚Ñ€ Ð¾Ñ‚Ñ‡ÐµÑ‚Ð¾Ð²
db.compliance_scans.find().pretty()

# ÐšÐ¾Ð»Ð¸Ñ‡ÐµÑÑ‚Ð²Ð¾ Ð¾Ñ‚Ñ‡ÐµÑ‚Ð¾Ð²
db.compliance_scans.countDocuments()

# ÐžÑ‡Ð¸ÑÑ‚ÐºÐ° Ð²ÑÐµÑ… Ð¾Ñ‚Ñ‡ÐµÑ‚Ð¾Ð²
db.compliance_scans.deleteMany({})
```

---

## ÐžÑ‚Ð»Ð°Ð´ÐºÐ°

### ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° ÑÑ‚Ð°Ñ‚ÑƒÑÐ° ÑÐµÑ€Ð²Ð¸ÑÐ¾Ð²

```bash
# Ð¡Ð¿Ð¸ÑÐ¾Ðº ÐºÐ¾Ð½Ñ‚ÐµÐ¹Ð½ÐµÑ€Ð¾Ð²
docker-compose ps

# Ð¡Ñ‚Ð°Ñ‚ÑƒÑ health check
docker inspect --format='{{json .State.Health}}' emergent-compliance-backend | jq

# Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ð½Ð¸Ðµ Ñ€ÐµÑÑƒÑ€ÑÐ¾Ð²
docker stats
```

### Ð ÐµÑˆÐµÐ½Ð¸Ðµ Ð¿Ñ€Ð¾Ð±Ð»ÐµÐ¼

#### Backend Ð½Ðµ Ð·Ð°Ð¿ÑƒÑÐºÐ°ÐµÑ‚ÑÑ

```bash
# ÐŸÑ€Ð¾Ð²ÐµÑ€Ð¸Ñ‚ÑŒ Ð»Ð¾Ð³Ð¸
docker-compose logs backend

# ÐŸÐµÑ€ÐµÑÐ¾Ð±Ñ€Ð°Ñ‚ÑŒ Ð¾Ð±Ñ€Ð°Ð·
docker-compose build --no-cache backend
docker-compose up -d backend
```

#### Frontend Ð½Ðµ Ð·Ð°Ð³Ñ€ÑƒÐ¶Ð°ÐµÑ‚ÑÑ

```bash
# ÐŸÑ€Ð¾Ð²ÐµÑ€Ð¸Ñ‚ÑŒ Ð»Ð¾Ð³Ð¸
docker-compose logs frontend

# ÐŸÑ€Ð¾Ð²ÐµÑ€Ð¸Ñ‚ÑŒ Ð¿ÐµÑ€ÐµÐ¼ÐµÐ½Ð½Ñ‹Ðµ Ð¾ÐºÑ€ÑƒÐ¶ÐµÐ½Ð¸Ñ
docker exec emergent-compliance-frontend env

# ÐŸÐµÑ€ÐµÑÐ¾Ð±Ñ€Ð°Ñ‚ÑŒ
docker-compose build --no-cache frontend
docker-compose up -d frontend
```

#### MongoDB Ð½ÐµÐ´Ð¾ÑÑ‚ÑƒÐ¿Ð½Ð°

```bash
# ÐŸÑ€Ð¾Ð²ÐµÑ€Ð¸Ñ‚ÑŒ ÑÑ‚Ð°Ñ‚ÑƒÑ
docker-compose logs mongodb

# ÐŸÑ€Ð¾Ð²ÐµÑ€Ð¸Ñ‚ÑŒ Ð¿Ð¾Ð´ÐºÐ»ÑŽÑ‡ÐµÐ½Ð¸Ðµ
docker exec emergent-compliance-mongodb mongosh --eval "db.adminCommand('ping')"

# ÐŸÐµÑ€ÐµÐ·Ð°Ð¿ÑƒÑÑ‚Ð¸Ñ‚ÑŒ
docker-compose restart mongodb
```

#### ÐŸÐ¾Ñ€Ñ‚ ÑƒÐ¶Ðµ Ð·Ð°Ð½ÑÑ‚

```bash
# ÐÐ°Ð¹Ñ‚Ð¸ Ð¿Ñ€Ð¾Ñ†ÐµÑÑ Ð½Ð° Ð¿Ð¾Ñ€Ñ‚Ñƒ 8001
sudo lsof -i :8001

# ÐÐ°Ð¹Ñ‚Ð¸ Ð¿Ñ€Ð¾Ñ†ÐµÑÑ Ð½Ð° Ð¿Ð¾Ñ€Ñ‚Ñƒ 3000
sudo lsof -i :3000

# ÐžÑÑ‚Ð°Ð½Ð¾Ð²Ð¸Ñ‚ÑŒ ÑÑƒÑ‰ÐµÑÑ‚Ð²ÑƒÑŽÑ‰Ð¸Ðµ ÐºÐ¾Ð½Ñ‚ÐµÐ¹Ð½ÐµÑ€Ñ‹
docker-compose down
```

---

## Production deployment

### Ð¡Ð¾Ð·Ð´Ð°Ð½Ð¸Ðµ .env Ñ„Ð°Ð¹Ð»Ð°

```bash
cat > .env << EOF
MONGO_ROOT_USERNAME=admin
MONGO_ROOT_PASSWORD=$(openssl rand -base64 32)
CORS_ORIGINS=https://yourdomain.com
BACKEND_URL=https://api.yourdomain.com
EOF
```

### Ð—Ð°Ð¿ÑƒÑÐº production

```bash
# Ð—Ð°Ð¿ÑƒÑÐº production compose
docker-compose -f docker-compose.prod.yml up -d

# ÐŸÑ€Ð¾ÑÐ¼Ð¾Ñ‚Ñ€ Ð»Ð¾Ð³Ð¾Ð²
docker-compose -f docker-compose.prod.yml logs -f

# ÐžÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐ°
docker-compose -f docker-compose.prod.yml down
```

---

## Makefile ÐºÐ¾Ð¼Ð°Ð½Ð´Ñ‹

Ð”Ð»Ñ ÑƒÐ´Ð¾Ð±ÑÑ‚Ð²Ð° Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐ¹Ñ‚Ðµ Makefile:

```bash
make help          # Ð¡Ð¿Ð¸ÑÐ¾Ðº Ð²ÑÐµÑ… ÐºÐ¾Ð¼Ð°Ð½Ð´
make setup         # ÐŸÐ¾Ð»Ð½Ð°Ñ Ð½Ð°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ° (Ð¿ÐµÑ€Ð²Ñ‹Ð¹ Ð·Ð°Ð¿ÑƒÑÐº)
make up            # Ð—Ð°Ð¿ÑƒÑÐº ÑÐµÑ€Ð²Ð¸ÑÐ¾Ð²
make down          # ÐžÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐ° ÑÐµÑ€Ð²Ð¸ÑÐ¾Ð²
make restart       # ÐŸÐµÑ€ÐµÐ·Ð°Ð¿ÑƒÑÐº
make logs          # ÐŸÑ€Ð¾ÑÐ¼Ð¾Ñ‚Ñ€ Ð²ÑÐµÑ… Ð»Ð¾Ð³Ð¾Ð²
make logs-backend  # Ð›Ð¾Ð³Ð¸ backend
make logs-frontend # Ð›Ð¾Ð³Ð¸ frontend
make clean         # Ð£Ð´Ð°Ð»ÐµÐ½Ð¸Ðµ ÐºÐ¾Ð½Ñ‚ÐµÐ¹Ð½ÐµÑ€Ð¾Ð² Ð¸ Ñ‚Ð¾Ð¼Ð¾Ð²
make shell-backend # Shell backend
make shell-db      # MongoDB shell
make health        # ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° Ð·Ð´Ð¾Ñ€Ð¾Ð²ÑŒÑ ÑÐµÑ€Ð²Ð¸ÑÐ¾Ð²
```

---

## ÐžÐ¿Ñ‚Ð¸Ð¼Ð¸Ð·Ð°Ñ†Ð¸Ñ

### ÐžÑ‡Ð¸ÑÑ‚ÐºÐ° Docker

```bash
# Ð£Ð´Ð°Ð»Ð¸Ñ‚ÑŒ Ð½ÐµÐ¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÐ¼Ñ‹Ðµ Ð¾Ð±Ñ€Ð°Ð·Ñ‹, ÐºÐ¾Ð½Ñ‚ÐµÐ¹Ð½ÐµÑ€Ñ‹, ÑÐµÑ‚Ð¸
docker system prune -a

# Ð£Ð´Ð°Ð»Ð¸Ñ‚ÑŒ Ð²ÑÑ‘ Ð²ÐºÐ»ÑŽÑ‡Ð°Ñ volumes
docker system prune -a --volumes

# ÐŸÐ¾ÐºÐ°Ð·Ð°Ñ‚ÑŒ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ð½Ð¸Ðµ Ð´Ð¸ÑÐºÐ°
docker system df
```

### ÐžÐ³Ñ€Ð°Ð½Ð¸Ñ‡ÐµÐ½Ð¸Ðµ Ñ€ÐµÑÑƒÑ€ÑÐ¾Ð²

Ð”Ð¾Ð±Ð°Ð²ÑŒÑ‚Ðµ Ð² `docker-compose.yml`:

```yaml
services:
  backend:
    deploy:
      resources:
        limits:
          cpus: '1'
          memory: 512M
        reservations:
          memory: 256M
```

---

## ÐœÐ¾Ð½Ð¸Ñ‚Ð¾Ñ€Ð¸Ð½Ð³

### Ð›Ð¾Ð³Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ

```bash
# Ð Ð°Ð·Ð¼ÐµÑ€ Ð»Ð¾Ð³Ð¾Ð²
docker inspect --format='{{.LogPath}}' emergent-compliance-backend | xargs ls -lh

# ÐžÑ‡Ð¸ÑÑ‚ÐºÐ° Ð»Ð¾Ð³Ð¾Ð²
docker-compose down
docker system prune
```

### ÐœÐµÑ‚Ñ€Ð¸ÐºÐ¸

```bash
# Ð ÐµÐ°Ð»ÑŒÐ½Ð¾Ðµ Ð²Ñ€ÐµÐ¼Ñ ÑÑ‚Ð°Ñ‚Ð¸ÑÑ‚Ð¸ÐºÐ°
docker stats --no-stream

# ÐšÐ¾Ð½ÐºÑ€ÐµÑ‚Ð½Ñ‹Ð¹ ÐºÐ¾Ð½Ñ‚ÐµÐ¹Ð½ÐµÑ€
docker stats emergent-compliance-backend --no-stream
```

---

## ÐŸÐ¾Ð»ÐµÐ·Ð½Ñ‹Ðµ ÑÐºÑ€Ð¸Ð¿Ñ‚Ñ‹

### ÐÐ²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¸Ð¹ Ð¿ÐµÑ€ÐµÐ·Ð°Ð¿ÑƒÑÐº Ð¿Ñ€Ð¸ Ð¿Ð°Ð´ÐµÐ½Ð¸Ð¸

Docker Compose Ð°Ð²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¸ Ð¿ÐµÑ€ÐµÐ·Ð°Ð¿ÑƒÑÐºÐ°ÐµÑ‚ ÑÐµÑ€Ð²Ð¸ÑÑ‹ Ñ `restart: unless-stopped`.

### Healthcheck endpoints

```bash
# Backend health
curl http://localhost:8001/api/

# MongoDB health
docker exec emergent-compliance-mongodb mongosh --eval "db.adminCommand('ping')"
```

---

## Ð”Ð¾Ð¿Ð¾Ð»Ð½Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ð°Ñ Ð¸Ð½Ñ„Ð¾Ñ€Ð¼Ð°Ñ†Ð¸Ñ

- ÐŸÐ¾Ð»Ð½Ð°Ñ Ð´Ð¾ÐºÑƒÐ¼ÐµÐ½Ñ‚Ð°Ñ†Ð¸Ñ: [DOCKER.md](DOCKER.md)
- ÐŸÑ€Ð¸Ð¼ÐµÑ€Ñ‹ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ð½Ð¸Ñ: [EXAMPLES.md](EXAMPLES.md)
- ÐžÑÐ½Ð¾Ð²Ð½Ð°Ñ Ð´Ð¾ÐºÑƒÐ¼ÐµÐ½Ñ‚Ð°Ñ†Ð¸Ñ: [README.md](README.md)
